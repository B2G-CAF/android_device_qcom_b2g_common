# HG changeset patch
# User Bhargav Gurappadi <bhargavg1@codeaurora.org>
# Date 1382755077 25200
# Node ID 484f9a7ab132cb9febde0eaf71a6e35e53752929
# Parent  d606b64c311084f561c4c629a3bed13f4ec4bfb1
Bug 931306 - DBusThread fails to compile on latest compilers

diff --git a/ipc/dbus/DBusThread.cpp b/ipc/dbus/DBusThread.cpp
--- a/ipc/dbus/DBusThread.cpp
+++ b/ipc/dbus/DBusThread.cpp
@@ -221,17 +221,17 @@ DBusWatcher::Poll()
 
   nsTArray<pollfd>::size_type i = 0;
 
   while (i < mPollData.Length()) {
     if (mPollData[i].revents == POLLIN) {
       if (mPollData[i].fd == mControlFdR.get()) {
         char data;
         res = TEMP_FAILURE_RETRY(read(mControlFdR.get(), &data, sizeof(data)));
-        NS_ENSURE_TRUE(res > 0, NS_OK);
+        NS_ENSURE_TRUE(res > 0, false);
 
         switch (data) {
           case DBUS_EVENT_LOOP_EXIT:
             continueThread = false;
             break;
           case DBUS_EVENT_LOOP_ADD:
             HandleWatchAdd();
             break;
